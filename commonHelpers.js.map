{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/error.svg","../src/main.js"],"sourcesContent":["export function createMarkup(arr) {\n  return arr\n    .map((image) => {\n      return `\n    <li class=\"gallery-item\">\n    <div class=\"gallery-list-container\">\n        <a class= \"img-link\" href=\"${image.largeImageURL}\">\n            <img class =\"gallery-image\" src=\"${image.webformatURL}\" \n            alt=\"${image.tags}\"/>\n        </a>\n        </div>\n        <div class= \"text-container-img\">\n        <p class = \"text\"> likes:\n                  <span class=\"span-text\">\"${image.likes}\"</span>  </p>      \n        <p  class = \"text\"> views:\n                  <span class=\"span-text\">\"${image.views}\"</span>  </p>\n        <p class = \"text\">  comments:\n                 <span class=\"span-text\">\"${image.comments}\"</span>  </p>\n        <p class = \"text\">   downloads:\n                 <span class=\"span-text\">\"${image.downloads}\" </span></p>\n        </div>\n    </li>`;\n    })\n    .join(\"\");\n}\n\n            \n           \n         ","\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nexport function getPhotos(q, page) {\n    const params = {\n        params: {\n            q,\n            page,\n            per_page: 15,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            key: '44004812-c52c8438ab8e6871c63eadf8f',\n        },\n    };\n\n    return axios.get(\"\", params);\n }\n","export default \"__VITE_ASSET__8479b7dd__\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { createMarkup } from \"./js/render-functions.js\";\nimport { getPhotos } from \"./js/pixabay-api.js\"\n\nimport errorSvg from \"./img/error.svg\";\n\n//!================================================================\nconst formEl = document.querySelector(\".js-form\");\nconst listEl = document.querySelector(\".js-gallery\");\nconst target = document.querySelector(\".js-backdrop\");\nconst loadMoreBtn = document.querySelector(\".js-gallery-btn\");\n\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n   captions: true,\n    captionsData: 'alt', \n    captionDelay: 250  \n});\n//!================================================================\n\nformEl.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onClick);\nlet page = 1;\nlet searchQuery = null;\n\nasync function onSubmit(e) {\n  e.preventDefault();\n  listEl.innerHTML = \"\";\n  page = 1;\n\n  showSpinner();\n  searchQuery = e.currentTarget.elements[\"search-query\"].value.trim();\n  try {\n    const response = await getPhotos(searchQuery, page);\n    // iziToast.message(`we found ${response.data.totalHits} photos`);\n    if (searchQuery === '') {\n      return iziToast.warning({\n        title: 'Error',\n        titleColor: '#fff',\n        messageColor: '#fff',\n        iconUrl: errorSvg,\n        message: \"Enter all fields\",\n        backgroundColor: 'red',\n        position: \"topRight\"\n      });\n        \n    }\n    if (response.data.hits.length === 0) {\n      loadMoreBtn.classList.add(\"is-hidden\");\n      return iziToast.error({\n        title: 'Error',\n        titleColor: '#fff',\n        messageColor: '#fff',\n        iconUrl: errorSvg,\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        backgroundColor: 'red',\n        position: \"topRight\"\n      });\n    }\n    \n    listEl.innerHTML = createMarkup(response.data.hits);\n    response.data.totalHits < 15 ? loadMoreBtn.classList.add(\"is-hidden\"): loadMoreBtn.classList.remove(\"is-hidden\");\n    \n     lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    stopSpinner();\n    e.target.reset();\n  }\n  }\n\nasync function onClick() {\n  page += 1;\n  showSpinner();\n  try {\n    const response = await getPhotos(searchQuery, page);\n    \n    listEl.insertAdjacentHTML('beforeend', createMarkup(response.data.hits));\n\n    let elem = document.querySelector(\".gallery-item\");\n    let rect = elem.getBoundingClientRect();\n  //   window.scrollBy(2, {\n  // top: rect,\n  // behavior: \"smooth\",\n  //   });\n    // window.scrollBy(2, -rect);\n\n    window.scrollBy(rect);\n\n    if (response.data.totalHits === page) {\n      loadMoreBtn.classList.add('is-hidden');\n      return iziToast.message(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    stopSpinner();\n  }\n}\n  \n\n\n\n\n//!================================================================\nconst opts = {\n  position: \"absolute\", // Element positioning\n  lines: 13, // The number of lines to draw\n  length: 44, // The length of each line\n  width: 19, // The line thickness\n  radius: 46, // The radius of the inner circle\n  scale: 1.25, // Scales overall size of the spinner\n  corners: 1, // Corner roundness (0..1)\n  speed: 1, // Rounds per second\n  rotate: 0, // The rotation offset\n  animation: \"spinner-line-fade-quick\", // The CSS animation name for the lines\n  direction: 1, // 1: clockwise, -1: counterclockwise\n  color: \"#2bab81\", // CSS color or array of colors\n  fadeColor: \"transparent\", // CSS color or array of colors\n  top: \"50%\", // Top position relative to parent\n  left: \"50%\", // Left position relative to parent\n  shadow: \"0 0 1px transparent\", // Box-shadow for the lines\n  zIndex: 2000000000, // The z-index (defaults to 2e9)\n  className: \"spinner\", // The CSS class to assign to the spinner\n};\nconst spinner = new Spinner(opts);\n\nfunction showSpinner() {\n  spinner.spin(target);\n  target.classList.remove(\"is-hidden\");\n}\n\nfunction stopSpinner() {\n  spinner.stop();\n  target.classList.add(\"is-hidden\");\n}\n//!================================================================\n"],"names":["createMarkup","arr","image","getPhotos","q","page","params","errorSvg","formEl","listEl","target","loadMoreBtn","lightbox","SimpleLightbox","onSubmit","onClick","searchQuery","e","showSpinner","response","iziToast","error","stopSpinner","rect","opts","spinner"],"mappings":"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"}